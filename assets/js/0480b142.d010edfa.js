"use strict";(self.webpackChunkintegration_docs=self.webpackChunkintegration_docs||[]).push([[70],{7208:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"faq","title":"FAQ","description":"Here are answers to the most common questions about integrating with Rapido\'s Partner PWA platform.","source":"@site/docs/faq.md","sourceDirName":".","slug":"/faq","permalink":"/ota-docs/docs/faq","draft":false,"unlisted":false,"editUrl":"https://github.com/rapido-labs/ota-docs/tree/main/docs/docs/faq.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"title":"FAQ","sidebar_label":"FAQ","sidebar_position":5},"sidebar":"tutorialSidebar","previous":{"title":"Security","permalink":"/ota-docs/docs/security"},"next":{"title":"Troubleshooting","permalink":"/ota-docs/docs/troubleshooting"}}');var t=i(4848),o=i(8453);const r={title:"FAQ",sidebar_label:"FAQ",sidebar_position:5},a="Frequently Asked Questions",l={},d=[{value:"Authentication &amp; Tokens",id:"authentication--tokens",level:2},{value:"What happens if a token is invalid?",id:"what-happens-if-a-token-is-invalid",level:3},{value:"Can I cache or store tokens for later use?",id:"can-i-cache-or-store-tokens-for-later-use",level:3},{value:"What if the user doesn&#39;t give consent?",id:"what-if-the-user-doesnt-give-consent",level:3},{value:"Session/Cookies",id:"sessioncookies",level:2},{value:"What if <code>sessionId</code> is not available in the PWA URL?",id:"what-if-sessionid-is-not-available-in-the-pwa-url",level:3},{value:"Technical Integration",id:"technical-integration",level:2},{value:"Why isn&#39;t <code>onTokenReceived</code> being called?",id:"why-isnt-ontokenreceived-being-called",level:3},{value:"Development &amp; Testing",id:"development--testing",level:2},{value:"How do I test my integration without the Rapido app?",id:"how-do-i-test-my-integration-without-the-rapido-app",level:3},{value:"Can I test with real tokens in development?",id:"can-i-test-with-real-tokens-in-development",level:3},{value:"What&#39;s the difference between client ID and API key?",id:"whats-the-difference-between-client-id-and-api-key",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"My integration works in development but fails in production",id:"my-integration-works-in-development-but-fails-in-production",level:3},{value:"Error: &quot;CORS policy blocks request&quot;",id:"error-cors-policy-blocks-request",level:3},{value:"Users see &quot;Authentication failed&quot; repeatedly",id:"users-see-authentication-failed-repeatedly",level:3},{value:"Contact &amp; Support",id:"contact--support",level:2},{value:"How do I get help with my integration?",id:"how-do-i-get-help-with-my-integration",level:3},{value:"How do I report a security issue?",id:"how-do-i-report-a-security-issue",level:3},{value:"Can I request new features or API endpoints?",id:"can-i-request-new-features-or-api-endpoints",level:3}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"frequently-asked-questions",children:"Frequently Asked Questions"})}),"\n",(0,t.jsx)(n.p,{children:"Here are answers to the most common questions about integrating with Rapido's Partner PWA platform."}),"\n",(0,t.jsx)(n.h2,{id:"authentication--tokens",children:"Authentication & Tokens"}),"\n",(0,t.jsx)(n.h3,{id:"what-happens-if-a-token-is-invalid",children:"What happens if a token is invalid?"}),"\n",(0,t.jsx)(n.p,{children:"When you try to validate an invalid token, Rapido's API will return an error:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n    "success": false,\n    "code": "INVALID_TOKEN",\n    "error": {\n        "message": "The provided token is invalid"\n    }\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:["Your backend should handle this by returning an authentication error to your PWA, which should then request a new token using ",(0,t.jsx)(n.code,{children:"requestUserToken()"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"can-i-cache-or-store-tokens-for-later-use",children:"Can I cache or store tokens for later use?"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"No, absolutely not."})," Tokens are designed to be single-use. Never store tokens in:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"localStorage or sessionStorage"}),"\n",(0,t.jsx)(n.li,{children:"Database"}),"\n",(0,t.jsx)(n.li,{children:"Cache systems"}),"\n",(0,t.jsx)(n.li,{children:"Log files"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Instead, store the session ID returned by your backend after successful token validation."}),"\n",(0,t.jsx)(n.h3,{id:"what-if-the-user-doesnt-give-consent",children:"What if the user doesn't give consent?"}),"\n",(0,t.jsx)(n.p,{children:"If a user denies consent in Rapido's consent screen:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["The ",(0,t.jsx)(n.code,{children:"onTokenReceived"})," callback will ",(0,t.jsx)(n.strong,{children:"not"})," be triggered"]}),"\n",(0,t.jsx)(n.li,{children:"Your PWA should implement a timeout mechanism to detect this scenario"}),"\n",(0,t.jsx)(n.li,{children:"Show an appropriate message explaining that consent is required"}),"\n",(0,t.jsx)(n.li,{children:"Provide an option to retry the authentication flow"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"function initiateAuthWithTimeout() {\n    let timeoutId;\n    let authReceived = false;\n    \n    // Set up timeout\n    timeoutId = setTimeout(() => {\n        if (!authReceived) {\n            showConsentDeniedMessage();\n        }\n    }, 30000); // 30 seconds timeout\n    \n    // Override the original callback\n    const originalCallback = window.onTokenReceived;\n    window.onTokenReceived = function(token) {\n        authReceived = true;\n        clearTimeout(timeoutId);\n        originalCallback(token);\n    };\n    \n    // Request token\n    window.NativeJSBridge.requestUserToken();\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"sessioncookies",children:"Session/Cookies"}),"\n",(0,t.jsxs)(n.h3,{id:"what-if-sessionid-is-not-available-in-the-pwa-url",children:["What if ",(0,t.jsx)(n.code,{children:"sessionId"})," is not available in the PWA URL?"]}),"\n",(0,t.jsx)(n.p,{children:"This is the normal flow for first-time users or when sessions have expired. Your PWA should:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Check for a stored session using ",(0,t.jsx)(n.code,{children:"fetchSessionId()"})]}),"\n",(0,t.jsxs)(n.li,{children:["If no stored session exists, call ",(0,t.jsx)(n.code,{children:"requestUserToken()"})," to initiate authentication"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"function checkAuthentication() {\n    const urlParams = new URLSearchParams(window.location.search);\n    const sessionId = urlParams.get('sessionId');\n    \n    if (sessionId) {\n        // Validate session from URL parameter\n        validateSession(sessionId);\n    } else {\n        // Check for stored session\n        const storedSession = window.NativeJSBridge?.fetchSessionId();\n        if (storedSession && storedSession !== 'null') {\n            validateSession(storedSession);\n        } else {\n            // No session - request authentication\n            requestAuthentication();\n        }\n    }\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"technical-integration",children:"Technical Integration"}),"\n",(0,t.jsxs)(n.h3,{id:"why-isnt-ontokenreceived-being-called",children:["Why isn't ",(0,t.jsx)(n.code,{children:"onTokenReceived"})," being called?"]}),"\n",(0,t.jsx)(n.p,{children:"Common reasons and solutions:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Function not globally accessible"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"// \u274c Wrong - inside a module or closure\n(function() {\n    function onTokenReceived(token) { /* ... */ }\n})();\n\n// \u2705 Correct - globally accessible\nwindow.onTokenReceived = function(token) { /* ... */ };\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Function defined after token request"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"// \u274c Wrong order\nwindow.NativeJSBridge.requestUserToken();\nwindow.onTokenReceived = function(token) { /* ... */ };\n\n// \u2705 Correct order\nwindow.onTokenReceived = function(token) { /* ... */ };\nwindow.NativeJSBridge.requestUserToken();\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Running outside Rapido app"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"// Check if running in Rapido environment\nif (!window.NativeJSBridge) {\n    console.log('Not running in Rapido app');\n    // Handle alternative authentication\n}\n"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"development--testing",children:"Development & Testing"}),"\n",(0,t.jsx)(n.h3,{id:"how-do-i-test-my-integration-without-the-rapido-app",children:"How do I test my integration without the Rapido app?"}),"\n",(0,t.jsx)(n.p,{children:"For development and testing, you can create a mock bridge:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"// Development helper - DO NOT use in production\nfunction createMockBridge() {\n    if (window.location.hostname === 'localhost' && !window.NativeJSBridge) {\n        window.NativeJSBridge = {\n            requestUserToken: function() {\n                console.log('Mock: Requesting token');\n                // Simulate consent screen delay\n                setTimeout(() => {\n                    if (window.onTokenReceived) {\n                        window.onTokenReceived('mock-token-' + Date.now());\n                    }\n                }, 2000);\n            },\n            storeSessionId: function(sessionId) {\n                console.log('Mock: Storing session', sessionId);\n                localStorage.setItem('mockRapidoSession', sessionId);\n            },\n            fetchSessionId: function() {\n                const session = localStorage.getItem('mockRapidoSession');\n                console.log('Mock: Fetching session', session);\n                return session;\n            }\n        };\n        console.log('Mock Rapido bridge created for development');\n    }\n}\n\n// Only use in development\nif (process.env.NODE_ENV === 'development') {\n    createMockBridge();\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"can-i-test-with-real-tokens-in-development",children:"Can I test with real tokens in development?"}),"\n",(0,t.jsx)(n.p,{children:"Yes, but use Rapido's staging environment:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Staging API"}),": ",(0,t.jsx)(n.code,{children:"https://rapido_ota_host/api/ota"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Staging tokens"})," are provided for testing"]}),"\n",(0,t.jsx)(n.li,{children:"Contact the integration team for staging credentials"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Never use production tokens in development environments."}),"\n",(0,t.jsx)(n.h3,{id:"whats-the-difference-between-client-id-and-api-key",children:"What's the difference between client ID and API key?"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Client ID"}),": Public identifier for your PWA, used in frontend ",(0,t.jsx)(n.code,{children:"requestUserToken()"})," calls"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"API Key"}),": Secret key for backend authentication with Rapido's APIs"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"// Client identification handled automatically by native app\nwindow.NativeJSBridge.requestUserToken();\n\n// API Key - ONLY use in backend\nconst headers = {\n    'authorization': `${process.env.RAPIDO_PARTNER_API_KEY}`\n};\n"})}),"\n",(0,t.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,t.jsx)(n.h3,{id:"my-integration-works-in-development-but-fails-in-production",children:"My integration works in development but fails in production"}),"\n",(0,t.jsx)(n.p,{children:"Common production issues:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Environment variables not set"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Ensure these are set in production\nRAPIDO_PARTNER_API_KEY=your-production-key\nRAPIDO_CLIENT_ID=your-client-id\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Wrong API endpoints"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"// Use production URLs in production\nconst baseURL = process.env.NODE_ENV === 'production'\n    ? 'https://partner-api.rapido.bike/ota'\n    : 'https://staging-api.rapido.bike/partner';\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"HTTPS certificate issues"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Ensure your SSL certificate is valid"}),"\n",(0,t.jsx)(n.li,{children:"Check certificate chain is complete"}),"\n",(0,t.jsx)(n.li,{children:"Verify certificate is not expired"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"error-cors-policy-blocks-request",children:'Error: "CORS policy blocks request"'}),"\n",(0,t.jsx)(n.p,{children:"This usually indicates your domain is not whitelisted. Contact Rapido's integration team to:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Add your production domain to the whitelist"}),"\n",(0,t.jsx)(n.li,{children:"Verify your staging domain is configured correctly"}),"\n",(0,t.jsx)(n.li,{children:"Check CORS configuration in your application"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"users-see-authentication-failed-repeatedly",children:'Users see "Authentication failed" repeatedly'}),"\n",(0,t.jsx)(n.p,{children:"Check these common causes:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Token expiry handling"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"// Handle token expiry gracefully\nif (error.code === 'INVALID_TOKEN') {\n    // Clear any stored session\n    if (window.NativeJSBridge?.storeSessionId) {\n        window.NativeJSBridge.storeSessionId('');\n    }\n    // Request new authentication\n    window.NativeJSBridge.requestUserToken();\n}\n"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"contact--support",children:"Contact & Support"}),"\n",(0,t.jsx)(n.h3,{id:"how-do-i-get-help-with-my-integration",children:"How do I get help with my integration?"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Check the documentation"}),": Start with our ",(0,t.jsx)(n.a,{href:"/ota-docs/docs/quickstart",children:"Quick Start Guide"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Review examples"}),": See ",(0,t.jsx)(n.a,{href:"/ota-docs/docs/api/examples",children:"API Examples"})," for implementation patterns"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Check troubleshooting"}),": Common issues are covered in ",(0,t.jsx)(n.a,{href:"/ota-docs/docs/troubleshooting",children:"Troubleshooting"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Contact support"}),": Email ",(0,t.jsx)(n.a,{href:"mailto:partner-support@rapido.bike",children:"partner-support@rapido.bike"})]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"how-do-i-report-a-security-issue",children:"How do I report a security issue?"}),"\n",(0,t.jsxs)(n.p,{children:["For security-related issues, contact ",(0,t.jsx)(n.a,{href:"mailto:security@rapido.bike",children:"security@rapido.bike"})," directly. Please do not post security issues in public forums."]}),"\n",(0,t.jsx)(n.h3,{id:"can-i-request-new-features-or-api-endpoints",children:"Can I request new features or API endpoints?"}),"\n",(0,t.jsxs)(n.p,{children:["Yes! Send feature requests to ",(0,t.jsx)(n.a,{href:"mailto:partner-api-support@rapido.bike",children:"partner-api-support@rapido.bike"})," with:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Detailed description of the feature"}),"\n",(0,t.jsx)(n.li,{children:"Use case and business justification"}),"\n",(0,t.jsx)(n.li,{children:"Expected timeline for implementation"}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Still have questions?"})," Contact our integration team at ",(0,t.jsx)(n.a,{href:"mailto:partner-support@rapido.bike",children:"partner-support@rapido.bike"})," or check our ",(0,t.jsx)(n.a,{href:"/ota-docs/docs/troubleshooting",children:"Troubleshooting Guide"})," for more detailed problem-solving steps."]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>a});var s=i(6540);const t={},o=s.createContext(t);function r(e){const n=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);